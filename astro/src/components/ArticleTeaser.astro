---
import { SanityImage } from '.';

export type Props = {
  _id: string;
  excerpt: string;
  publishedAt: string;
  imageCount?: number;
  mainImage: any;
  readingTime?: number;
  slug: string;
  title: string;
};

const { _id, excerpt, imageCount, mainImage, readingTime, slug, title } =
  Astro.props;
---

<article class="flex flex-col md:flex-row gap-8 fade-in-up link-box">
  {
    mainImage && (
      <figure>
        <SanityImage
          image={mainImage}
          width="600"
          transition:name={`article_cover_${_id}`}
        />
        {mainImage?.alt && (
          <figcaption class="mt-1 text-step--2 italic">
            {mainImage.alt}
          </figcaption>
        )}
      </figure>
    )
  }
  <div>
    <div class="max-w-prose">
      {
        (imageCount || readingTime) && (
          <p class="mb-2 text-step--2 text-gray-500 dark:text-gray-400">
            {[
              readingTime && `${readingTime} minute read`,
              imageCount && `${imageCount} image${imageCount > 1 ? 's' : ''}`,
            ]
              .filter(Boolean)
              .join(' and ')}
          </p>
        )
      }
      <h2 class="text-5xl font-semibold mb-8">
        {title}
      </h2>
      {
        excerpt && (
          <div class="prose lg:prose-lg dark:prose-invert mb-6">
            <p>{excerpt}</p>
          </div>
        )
      }
      <a
        class="link link-overlay"
        href={`/article/${slug}`}
        title={`Read full article: ${title}`}
        aria-label={`Read full article: ${title}`}
      >
        Read full article
      </a>
    </div>
  </div>
</article>
